<VirtualHost {{ip}}:{{port}}>
    SSLEngine On
    SSLCACertificateFile {{ca_chain}}
    SSLCertificateFile {{cert}}
    SSLCertificateKeyFile {{certkey}}
    ServerName {{servername}}

    DocumentRoot /secure/sites/maurus.net/webdav
    ErrorLog /secure/sites/maurus.net/logs/error_log.webdav
    CustomLog /secure/sites/maurus.net/logs/access_log.webdav combined

    AcceptPathInfo On

    DavLockDB /secure/sites/maurus.net/webdav.lockdb

    <Directory /secure/sites/maurus.net/webdav/>
        DAV On
        DavDepthInfinity On

        # wait for OpenID connect support in django-oauth-toolkit, then use
        # libapache2-mod-auth-openidc as the auth backend
        #AuthName "maurus.net document storage"
        #AuthType Basic
        #AuthUserFile /secure/sites/maurus.net/secure.passwd

        Options Indexes
        <Limit HEAD GET POST OPTIONS PROPFIND>
            require valid-user
        </Limit>
        <Limit MKCOL PUT DELETE LOCK UNLOCK COPY MOVE PROPPATCH>
            Deny from all
        </Limit>
    </Directory>

    #<Directory /secure/sites/maurus.net/webdav/jm/>
    #    <Limit HEAD GET POST OPTIONS PROPFIND MKCOL PUT DELETE LOCK UNLOCK COPY MOVE PROPPATCH>
    #        allow from all
    #        require user jonas
    #    </Limit>
    #</Directory>
</VirtualHost>
